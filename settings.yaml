apiVersion: v1alpha1
kind: Setting
metadata:
  name: halo-theme-settings
spec:
  forms:
    - group: global
      label: 全局
      formSchema:
        - $formkit: select
          name: logo_type
          label: Logo 类型
          value: text
          options:
            - label: 文字
              value: text
            - label: 图片
              value: image
        - $formkit: text
          name: footer_text
          label: 页脚描述
          value: ""
        - $formkit: checkbox
          name: show_search_button
          label: 显示搜索按钮（占位）
          value: true
        - $formkit: checkbox
          name: show_color_toggle
          label: 显示明暗切换（占位）
          value: true
        - $formkit: checkbox
          name: show_login_button
          label: 显示登录按钮（占位）
          value: true
    - group: style
      label: 样式
      formSchema:
        - $formkit: select
          name: color_scheme
          label: 默认配色
          value: system
          options:
            - label: 跟随系统
              value: system
            - label: 深色
              value: dark
            - label: 浅色
              value: light
        - $formkit: checkbox
          name: enable_change_color_scheme
          label: 允许访客切换配色
          value: false
    - group: home
      label: 首页
      formSchema:
        - $formkit: text
          name: schedule_title
          label: 日程模块标题
          value: Schedule
        - $formkit: tagSelect
          name: schedule_tag
          label: 日程标签
          help: 用该标签筛选日程文章（自定义字段 eventStart/eventEnd 提供日期）
          value: ""
    - group: projects
      label: 项目聚合页
      formSchema:
        - $formkit: text
          name: page_title
          label: 分类聚合页标题
          value: ""
        - $formkit: array
          name: rows
          label: 行配置
          value: []
          itemLabels:
            - type: text
              label: $value.card_count
          children:
            - $formkit: number
              name: card_count
              label: 卡片数量
              value: 3
              min: 1
              max: 3
            - $formkit: number
              name: height_factor
              label: 高度因子
              help: 行内卡片高度 = (行宽度 / 卡片数量) × 高度因子
              value: 1.2
              step: 0.1
              min: 0.6
              max: 2
            - $formkit: list
              name: categories
              label: 行内分类
              help: 顺序决定卡片顺序；少于卡片数量则空白占位，多余则忽略
              value: []
              itemType: object
              addLabel: 添加分类
              upControl: true
              downControl: true
              removeControl: true
              children:
                - $formkit: categorySelect
                  name: category
                  label: 分类
                  validation: required
                  validation-label: 分类
                  value: ""
                - $formkit: text
                  name: cta_text
                  label: 跳转按钮文案
                  help: 仅单卡行右下角按钮使用
                  value: ""
    - group: news
      label: 动态分类页
      formSchema:
        - $formkit: array
          name: modules
          label: 模块配置
          value: []
          itemLabels:
            - type: text
              label: $value.layout
          children:
            - $formkit: select
              name: layout
              label: 模块布局
              value: "1"
              options:
                - label: 单栏
                  value: "1"
                - label: 双栏
                  value: "2"
                - label: 三栏
                  value: "3"
            - $formkit: categorySelect
              name: col1_category
              label: 第一栏分类
              value: ""
            - $formkit: postSelect
              if: "$value.layout === '1'"
              name: carousel_posts
              label: 轮播文章
              help: 仅单栏使用，按配置顺序展示
              value: []
              multiple: true
            - $formkit: number
              if: "$value.layout === '2'"
              name: layout_limit
              label: 数量
              help: 控制右侧栏数量，并用于计算左侧展示数量
              value: 6
              min: 1
              max: 30
            - $formkit: number
              if: "$value.layout === '1' || $value.layout === '3'"
              name: col1_limit
              label: 第一栏数量
              value: 6
              min: 1
              max: 30
            - $formkit: checkbox
              if: "$value.layout === '1'"
              name: show_more
              label: 显示了解更多按钮
              value: true
            - $formkit: categorySelect
              if: "$value.layout === '2' || $value.layout === '3'"
              name: col2_category
              label: 第二栏分类
              value: ""
            - $formkit: number
              if: "$value.layout === '3'"
              name: col2_limit
              label: 第二栏数量
              value: 6
              min: 1
              max: 30
            - $formkit: categorySelect
              if: "$value.layout === '3'"
              name: col3_category
              label: 第三栏分类
              value: ""
            - $formkit: number
              if: "$value.layout === '3'"
              name: col3_limit
              label: 第三栏数量
              value: 6
              min: 1
              max: 30
