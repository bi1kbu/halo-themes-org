apiVersion: v1alpha1
kind: Setting
metadata:
  name: halo-theme-settings
spec:
  forms:
    - group: global
      label: 全局
      formSchema:
        - $formkit: select
          name: logo_type
          label: Logo 类型
          value: text
          options:
            - label: 文字
              value: text
            - label: 图片
              value: image
        - $formkit: checkbox
          name: show_search_button
          label: 显示搜索按钮
          value: true
        - $formkit: checkbox
          name: show_color_toggle
          label: 显示明暗切换
          value: true
        - $formkit: checkbox
          name: show_login_button
          label: 显示登录按钮
          value: true
    - group: footer
      label: 页脚
      formSchema:
        - $formkit: text
          name: footer_text
          label: 页脚描述
          help: 为空则不显示
          value: ""
        - $formkit: text
          name: footer_record
          label: 备案信息
          help: 为空则不显示
          value: ""
        - $formkit: array
          name: mobile_menu
          label: 移动端底部菜单
          value: []
          itemLabels:
            - type: text
              label: $value.name
          children:
            - $formkit: text
              name: name
              label: 按钮名称
              validation: required
              validation-label: 按钮名称
              value: ""
            - $formkit: iconify
              name: foot_menu_icon
              label: 按钮图标
              help: 选择后将使用图标替代按钮名称
              value: ""
            - $formkit: select
              name: action
              label: 功能选择
              validation: required
              validation-label: 功能选择
              value: custom
              options:
                - label: 自定义链接
                  value: custom
                - label: 搜索
                  value: search
                - label: 回到顶部
                  value: top
            - $formkit: text
              name: url
              label: URL
              help: 仅选择自定义链接时有效
              value: ""
    - group: style
      label: 样式
      formSchema:
        - $formkit: select
          name: color_scheme
          label: 默认配色
          value: system
          options:
            - label: 跟随系统
              value: system
            - label: 深色
              value: dark
            - label: 浅色
              value: light
        - $formkit: checkbox
          name: enable_change_color_scheme
          label: 允许访客切换配色
          value: true
    - group: home
      label: 首页
      formSchema:
        - $formkit: text
          name: schedule_title
          label: 日程模块标题
          value: Schedule
        - $formkit: tagSelect
          name: schedule_tag
          label: 日程标签
          help: 用该标签筛选日程文章（自定义字段 eventStart/eventEnd 提供日期）
          value: ""
    - group: projects
      label: 项目聚合页
      formSchema:
        - $formkit: text
          name: page_title
          label: 分类聚合页标题
          value: ""
        - $formkit: array
          name: rows
          label: 行配置
          value: []
          itemLabels:
            - type: text
              label: $value.card_count
          children:
            - $formkit: number
              name: card_count
              label: 卡片数量
              value: 3
              min: 1
              max: 3
            - $formkit: number
              name: height_factor
              label: 高度因子
              help: 行内卡片高度 = (行宽度 / 卡片数量) × 高度因子
              value: 1.2
              step: 0.1
              min: 0.6
              max: 2
            - $formkit: list
              name: categories
              label: 行内分类
              help: 顺序决定卡片顺序；少于卡片数量则空白占位，多余则忽略
              value: []
              itemType: string
              addLabel: 添加分类
              upControl: true
              downControl: true
              removeControl: true
              children:
                - $formkit: categorySelect
                  index: "$index"
                  label: 分类
                  value: ""
    - group: news
      label: 动态分类页
      formSchema:
        - $formkit: array
          name: modules
          label: 模块配置
          value: []
          itemLabels:
            - type: text
              label: $value.layout
          children:
            - $formkit: select
              name: layout
              label: 模块布局
              help: 如果需要切换布局，切换后请先保存再重新打开进行修改。
              value: ""
              options:
                - label: 单栏
                  value: "1"
                - label: 双栏（1:1）
                  value: "2"
                - label: 双栏（2:1）
                  value: "3"
                - label: 三栏
                  value: "4"
            - $formkit: number
              name: limit
              label: 文章显示数量
              help: 建议单栏设置为6~10，双栏2:1设置为2~3，其他配置建议设置大于6
              value: 6
              min: 1
              max: 30
            - $formkit: categorySelect
              name: col1_category
              label: 第一栏分类
              value: ""
            - $formkit: postSelect
              if: "$value.layout == '' || $value.layout === '1' || $value.layout === 1"
              name: carousel_posts
              label: 轮播文章
              help: 仅在单栏布局生效，其他布局可忽略；按配置顺序展示
              value: []
              multiple: true
            - $formkit: categorySelect
              if: "$value.layout == '' || $value.layout === '2' || $value.layout === 2 || $value.layout === '3' || $value.layout === 3 || $value.layout === '4' || $value.layout === 4"
              name: col2_category
              label: 第二栏分类
              value: ""
            - $formkit: categorySelect
              if: "$value.layout == '' || $value.layout === '4' || $value.layout === 4"
              name: col3_category
              label: 第三栏分类
              value: ""
            - $formkit: checkbox
              if: "$value.layout == '' || $value.layout === '1' || $value.layout === 1"
              name: show_module_title
              label: 显示模块名称
              help: 仅在单栏布局生效，用于控制标题栏显示
              value: false
            - $formkit: checkbox
              if: "$value.layout == '' || $value.layout === '1' || $value.layout === 1"
              name: show_more
              label: 显示了解更多按钮
              value: true
